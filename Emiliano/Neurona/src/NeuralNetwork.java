/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */



import java.math.BigDecimal;

/**
 *
 * @author Jacob
 */
public class NeuralNetwork {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        double[] reposo1 = {179,95,84,93,116};
        double[] reposo2 = {180,95,84,94,117};
        double[] reposo3 = {179,95,84,94,116};
        double[] papaya1 = {510,249,228,134,204};
        double[] papaya2 = {181,95,90,94,117};
        double[] papaya3 = {448,201,184,107,162};
        double[] naranja1 = {496,240,215,130,335};
        double[] naranja2 = {186,91,77,106,100};
        double[] naranja3 = {181,89,74,106,98};
        double[] manzana1 = {336,150,130,120,168};
        double[] manzana2 = {197,101,90,105,118};
        double[] manzana3 = {434,209,178,154,243};
        double[] limon = {146,67,75,91,144};

        //double[] entrada527 = {138,63,71,86,130};
        double[] entrada527 = {138,63,71,80,128};
            
        double[] datosEntrada = entrada527;

        RedNeuronal rn = new RedNeuronal(5, 25, 12);
        
//        double[][] wh = {
//            {1.01995198382119,-0.461332425288987,-2.22175898911184,2.55503287792048,0.258631105313892},
//            {-0.196568294772324,5.45311701423804,-5.99896747331592,-0.888654834570042,1.24669593650149},
//            {0.0973412612946058,-0.453837487408206,0.941743545570309,0.313066806586723,4.27732857068036},
//            {0.00484846480160411,3.10047178904322,1.39304218562446,-4.63391081255369,-1.01679302177671},
//            {2.76941794395513,1.57571160231193,-0.400817501683741,1.50584986633342,-3.09491047182937}
//        };



        //Modificado 12/01/2016

        double[][] wh = Utils.matriz(25, 5, "C:\\Users\\Usuario-Pc\\Documents\\servicio\\whJacob.txt");

        //double[] bh = {-1.09659722661574,-0.201210660592570,4.30442603530485,-1.66821496565658,1.96045563475218};
        double[] bh = {-3.25673418641350,
                          -4.67455287457812,
                          -2.39804069646148,
                          -2.93957449457904,
                          -1.46547280646267,
                          -4.41059680162024,
                          1.93339038022594,
                          -0.809827058896212,
                          2.14438740572098,
                          1.69080652722725,
                          -0.131990014101936,
                          0.493648372916902,
                          1.58854041908499,
                          -0.322399657615589,
                          0.0582852552055929,
                          -1.69901263478675,
                          -1.93846044860296,
                          -4.36334133417541,
                          2.14788928277565,
                          -2.52372088439491,
                          1.60589968685329,
                          -1.27876722451295,
                          1.52318364566735,
                          7.91223838358097,
                          3.50250393587091
        };
        
//        double[][] wy = {
//            {0.347098873448549,-3.47124220521613,-0.279033057884052,4.86256727674867,-2.36163392086547},
//            {-1.79582191042740,6.77883952039709,-4.64244245682428,0.0904454327289272,3.35529267401077},
//            {3.40332432162020,-2.86764114414406,4.85980803970527,-4.56245106320951,-1.70369478952257}
//        };


        //Modificado 12/01/2016        
        double[][] wy = Utils.matriz(12, 25, "C:\\Users\\Usuario-Pc\\Documents\\servicio\\lwJacob.txt");

        double[] by = {-1.03659054983903,-1.39745892646399,-1.02120949414766};
        double[] byMio = {-2.39041814960659,
                          -0.308761091635939,
                          -0.0658656948663389,
                          -0.667276550492073,
                          -0.624646858334158,
                          -1.78572147857071,
                          -0.662508614747756,
                          -1.38389872142537,
                          -2.05258748595340,
                          0.245103016758037,
                          0.406938924298525,
                          0.415625338410665
        };
        
//        double[] minh = {179,89,73,93,98};
//        double[] maxh = {510,249,228,155,336};

        double[] minh = {136,39,50,37,31};
        double[] maxh = {539,165,286,106,477};
    
        rn.setPesosAndBias(wh, bh, wy, byMio, minh, maxh);
        
        double[] output = rn.calcularSalida(datosEntrada);
        
        System.out.print("Entrada [ ");
        for(double e : datosEntrada){
            System.out.print(e + " ");
        }
        System.out.print("] -> ");
        
        System.out.print("Salida [ ");
        for(double s : output){
            System.out.print((int)s + " ");
        }
        System.out.println("]");
        System.out.println("");
        System.out.println("Funcion XOR");
        //Compurta XOR
        RedNeuronal rn2 = new RedNeuronal(2, 2, 1);
        double[][] wh2 = {
            {-1.942779536696304, -2.4033439922084954}, 
            {1.476484576128277, 1.5285706752204653}
        };
        double[] bh2 = {-2.2690966258542424, -1.2654579142409594};
        
        double[][] wy2 = {
            {-2.7857541174718032, -2.81730152144229}
        };
        double[] by2 = {-2.52832962325685};
        
        double[] minh2 = {-1, -1};
        double[] maxh2 = {1, 1};
        
        rn2.setPesosAndBias(wh2, bh2, wy2, by2, minh2, maxh2);
        
        int a = 1, b = 1;
        double[] input = {a, b};
        double[] out = rn2.calcularSalida(input);
        for(double r : out){
            r = (r >=0)?1:0;
            System.out.print(a + " XOR " + b + ": " + (int)r + " ");
        }
        System.out.println("");
        System.out.println("Salida (y3) = " + (a ^ b));
    }
    /*
    Respaldo Pesos Bias y Max, Min
    
     double[][] wh = {
            {1.07987539392029,-0.404181193088732,-2.16573001248778,2.58404289409659,0.312605404194593}, 
            {-0.0463253891467511,5.50803082054311,-5.98475697757929,-0.588108676431047,1.00208874182431},
            {0.0542317812823294,-0.446990228090893,1.03082790690998,0.0751626310995720,4.35624880978294},
            {-0.0930500645648404,3.01403786654007,1.25942258684004,-4.72737718141671,-1.05200917561357},
            {2.78012692333067,1.57215649310495,-0.430233211501268,1.70934699698604,-3.13669582990242}
        };
        double[] bh = {-1.14771468823249,-0.169929775876715,4.15416187556645,-1.63305525765776,2.00706077418342};
        
        double[][] wy = {
            {0.0587836422168246,-3.47809373741981,-0.325274231570118,4.75185529591425,-2.54832499554675},
            {-2.02828764092878,6.70901984060512,-4.61375482870847,-0.0111495706849454,3.41187237766676},
            {3.17713313448064,-2.94362764647722,4.85953659715100,-4.60457254486677,-1.84249153233609}
        };
        double[] by = {-0.745534078440101,-1.15541102801614,-0.797758071427748};
        
        double[] minh = {180,89,73,93,98};
        double[] maxh = {510,249,228,155,336};
    */
}
